
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Calculate the Brunt Vaisala Frequency &#8212; Regional MOM6 Package</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/tutorials/brunt_vaisala_freq_tutorial';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="mom6_read - Get the CEFI data" href="../api/mom6_read.html" />
    <link rel="prev" title="Calculate the Isothermal Layer Depth" href="isothermal_layer_depth_tutorial.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/CEFI_python_tool.png" class="logo__image only-light" alt="Regional MOM6 Package - Home"/>
    <script>document.write(`<img src="../../_static/CEFI_python_tool.png" class="logo__image only-dark" alt="Regional MOM6 Package - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Regional MOM6 Package
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../get_started/install.html">Installing the package using <code class="docutils literal notranslate"><span class="pre">Conda</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">pip</span></code></a></li>



</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="data_access_tutorial.html">Accessing the CEFI data</a></li>
<li class="toctree-l1"><a class="reference internal" href="regrid_tutorial.html">Regridding the Raw Grid to Regular Grid</a></li>
<li class="toctree-l1"><a class="reference internal" href="isothermal_layer_depth_tutorial.html">Calculate the Isothermal Layer Depth</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Calculate the Brunt Vaisala Frequency</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">API reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../api/mom6_read.html"><code class="docutils literal notranslate"><span class="pre">mom6_read</span></code> - Get the CEFI data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/mom6_regrid.html"><code class="docutils literal notranslate"><span class="pre">mom6_regrid</span></code> - Regrid the data</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api/api_reference_content.html"><code class="docutils literal notranslate"><span class="pre">mom6_module</span></code></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/mom6.mom6_module.mom6_read.html">mom6.mom6_module.mom6_read</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/mom6.mom6_module.mom6_statistics.html">mom6.mom6_module.mom6_statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/mom6.mom6_module.mom6_regrid.html">mom6.mom6_module.mom6_regrid</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/mom6.mom6_module.mom6_detrend.html">mom6.mom6_module.mom6_detrend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/mom6.mom6_module.mom6_forecast_tercile.html">mom6.mom6_module.mom6_forecast_tercile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/mom6.mom6_module.mom6_vector_rotate.html">mom6.mom6_module.mom6_vector_rotate</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/mom6.mom6_module.mom6_mhw.html">mom6.mom6_module.mom6_mhw</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/generated/mom6.mom6_module.mom6_indexes.html">mom6.mom6_module.mom6_indexes</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/NOAA-CEFI-Portal/regional_mom6" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/NOAA-CEFI-Portal/regional_mom6/issues/new?title=Issue%20on%20page%20%2Fcontent/tutorials/brunt_vaisala_freq_tutorial.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/content/tutorials/brunt_vaisala_freq_tutorial.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Calculate the Brunt Vaisala Frequency</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-the-data">Get the data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-bbv">Calculate BBV</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dask-for-parallelization">Dask for Parallelization</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="calculate-the-brunt-vaisala-frequency">
<h1>Calculate the Brunt Vaisala Frequency<a class="headerlink" href="#calculate-the-brunt-vaisala-frequency" title="Link to this heading">#</a></h1>
<div class="info admonition">
<p class="admonition-title">Technical info</p>
<p>Because the calculation only needs information from one column at a time, we can work on many columns at once. This makes the program run faster. To do this, we use a Python package called Dask, which lets us split the work between multiple workers and run them in parallel. <a class="reference external" href="https://docs.dask.org/en/stable/10-minutes-to-dask.html">Dask</a> is already included when you install this regional mom6 preprocessing package, so you don’t need to install anything extra.</p>
</div>
<section id="get-the-data">
<h2>Get the data<a class="headerlink" href="#get-the-data" title="Link to this heading">#</a></h2>
<p>To calculate the Brunt Vaisala Frequency (BBV), we need the following data</p>
<ul class="simple">
<li><p>salinity profile (<code class="docutils literal notranslate"><span class="pre">so</span></code>)</p></li>
<li><p>potential temperature profile (<code class="docutils literal notranslate"><span class="pre">thetao</span></code>)</p></li>
</ul>
<p>Here we utilize the AWS S3 bucket with the CEFI data to load the data.
We use the <code class="docutils literal notranslate"><span class="pre">AccessFiles</span></code> class from the <code class="docutils literal notranslate"><span class="pre">mom6_read</span></code> module to specify the dataset information and data source. If the connection is successful, the class will return a standard message: <code class="docutils literal notranslate"><span class="pre">Files</span> <span class="pre">are</span> <span class="pre">available</span> <span class="pre">on</span> <span class="pre">S3</span> <span class="pre">(s3://...)</span></code>, indicating the S3 link to the dataset.
For a more detail understanding, please go to <a class="reference internal" href="data_access_tutorial.html#cefi-access-label"><span class="std std-ref">CEFI access tutorial</span></a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dict_data_info</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;region&quot;</span><span class="p">:</span> <span class="s2">&quot;northeast_pacific&quot;</span><span class="p">,</span>
    <span class="s2">&quot;subdomain&quot;</span><span class="p">:</span> <span class="s2">&quot;full_domain&quot;</span><span class="p">,</span>
    <span class="s2">&quot;experiment_type&quot;</span><span class="p">:</span> <span class="s2">&quot;hindcast&quot;</span><span class="p">,</span>
    <span class="s2">&quot;output_frequency&quot;</span><span class="p">:</span> <span class="s2">&quot;monthly&quot;</span><span class="p">,</span>
    <span class="s2">&quot;grid_type&quot;</span><span class="p">:</span> <span class="s2">&quot;raw&quot;</span><span class="p">,</span>
    <span class="s2">&quot;release&quot;</span><span class="p">:</span> <span class="s2">&quot;r20250509&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data_source&quot;</span><span class="p">:</span> <span class="s2">&quot;s3&quot;</span>
<span class="p">}</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mom6.mom6_module.mom6_read</span><span class="w"> </span><span class="kn">import</span> <span class="n">AccessFiles</span>
<span class="n">cefi_data_access</span> <span class="o">=</span> <span class="n">AccessFiles</span><span class="p">(</span><span class="o">**</span><span class="n">dict_data_info</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Files are available on S3 (s3://noaa-oar-cefi-regional-mom6-pds/northeast_pacific/full_domain/hindcast/monthly/raw/r20250509)
</pre></div>
</div>
</div>
</div>
<p>Once the data <code class="docutils literal notranslate"><span class="pre">cefi_data_access</span></code> object connects to the AWS S3, we can use its <code class="docutils literal notranslate"><span class="pre">get</span></code> method to choose the variable we need for our calculation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">so_path</span> <span class="o">=</span> <span class="n">cefi_data_access</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">variable</span><span class="o">=</span><span class="s1">&#39;so&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">thetao_path</span> <span class="o">=</span> <span class="n">cefi_data_access</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">variable</span><span class="o">=</span><span class="s1">&#39;thetao&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">static_path</span> <span class="o">=</span> <span class="n">cefi_data_access</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">variable</span><span class="o">=</span><span class="s1">&#39;ocean_static&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">so_path</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;s3://noaa-oar-cefi-regional-mom6-pds/northeast_pacific/full_domain/hindcast/monthly/raw/r20250509/so.nep.full.hcast.monthly.raw.r20250509.199301-202412.json&#39;
</pre></div>
</div>
</div>
</div>
<p>Each variable path above contains an S3 link to the index file (.json) created by <a class="reference external" href="https://fsspec.github.io/kerchunk/">kerchunk</a> (a cloud optimized data storage solution similar to Zarr but with the benefit of retaining the original netcdf file). We can now load this data using <code class="docutils literal notranslate"><span class="pre">Xarray</span></code>, a Python package that also comes included when you install this package.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">xarray</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">xr</span>
<span class="n">s3_storage_options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;remote_options&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;anon&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
    <span class="s2">&quot;remote_protocol&quot;</span><span class="p">:</span> <span class="s2">&quot;s3&quot;</span><span class="p">,</span>
    <span class="s2">&quot;target_options&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;anon&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
    <span class="s2">&quot;target_protocol&quot;</span><span class="p">:</span> <span class="s2">&quot;s3&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">da_so</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span>
    <span class="n">so_path</span><span class="p">,</span>
    <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;kerchunk&quot;</span><span class="p">,</span>
    <span class="n">chunks</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;yh&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;xh&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;z_l&#39;</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">},</span>
    <span class="n">storage_options</span><span class="o">=</span><span class="n">s3_storage_options</span>
<span class="p">)[</span><span class="s1">&#39;so&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">da_thetao</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span>
    <span class="n">thetao_path</span><span class="p">,</span>
    <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;kerchunk&quot;</span><span class="p">,</span>
    <span class="n">chunks</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;yh&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;xh&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;z_l&#39;</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">},</span>
    <span class="n">storage_options</span><span class="o">=</span><span class="n">s3_storage_options</span>
<span class="p">)[</span><span class="s1">&#39;thetao&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">da_lon</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span>
    <span class="n">static_path</span><span class="p">,</span>
    <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;kerchunk&quot;</span><span class="p">,</span>
    <span class="n">chunks</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;yh&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;xh&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">},</span>
    <span class="n">storage_options</span><span class="o">=</span><span class="n">s3_storage_options</span>
<span class="p">)[</span><span class="s1">&#39;geolon&#39;</span><span class="p">]</span>

<span class="n">da_lat</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span>
    <span class="n">static_path</span><span class="p">,</span>
    <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;kerchunk&quot;</span><span class="p">,</span>
    <span class="n">chunks</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;yh&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;xh&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">},</span>
    <span class="n">storage_options</span><span class="o">=</span><span class="n">s3_storage_options</span>
<span class="p">)[</span><span class="s1">&#39;geolat&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="info admonition">
<p class="admonition-title">Techical info</p>
<p>The data is now split into chunks as specified when we opened the dataset using the keyword argument <code class="docutils literal notranslate"><span class="pre">chunks={'time':</span> <span class="pre">1,</span> <span class="pre">'yh':</span> <span class="pre">50,</span> <span class="pre">'xh':</span> <span class="pre">50,</span> <span class="pre">'z_l':</span> <span class="pre">-1}</span></code>. The setting <code class="docutils literal notranslate"><span class="pre">'z_l':</span> <span class="pre">-1</span></code> means that all depth levels for the <code class="docutils literal notranslate"><span class="pre">thetao</span></code> data are kept together in a single chunk. This way, when we run the calculation, all the information for a column is in one place, so the program only needs to work with a single chunk at a time.</p>
</div>
<p>Currently, the “data” of each variable is not loaded. But the meta data and the coordinate information has been loaded to the local memory. A quick check below shows how the “data” is store and arranged.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">da_thetao</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
  border: 2px solid transparent !important;
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0) !important;
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "►";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "▼";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;thetao&#x27; (z_l: 52, yh: 816, xh: 342)&gt; Size: 58MB
dask.array&lt;getitem, shape=(52, 816, 342), dtype=float32, chunksize=(52, 50, 50), chunktype=numpy.ndarray&gt;
Coordinates:
    time     datetime64[ns] 8B 1993-01-16T12:00:00
  * xh       (xh) float64 3kB 229.1 229.2 229.3 229.3 ... 254.8 254.9 255.0
  * yh       (yh) float64 7kB 13.86 13.93 14.0 14.07 ... 59.5 59.51 59.52 59.52
  * z_l      (z_l) float64 416B 2.5 7.5 12.5 17.5 ... 5.25e+03 5.75e+03 6.25e+03
Attributes:
    cell_measures:  volume: volcello area: areacello
    cell_methods:   area:mean z_l:mean yh:mean xh:mean time: mean
    long_name:      Sea Water Potential Temperature
    standard_name:  sea_water_potential_temperature
    time_avg_info:  average_T1,average_T2,average_DT
    units:          degC</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'thetao'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>z_l</span>: 52</li><li><span class='xr-has-index'>yh</span>: 816</li><li><span class='xr-has-index'>xh</span>: 342</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-02414b8f-7872-40f5-8d22-cc25b7464600' class='xr-array-in' type='checkbox' checked><label for='section-02414b8f-7872-40f5-8d22-cc25b7464600' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>dask.array&lt;chunksize=(52, 50, 50), meta=np.ndarray&gt;</span></div><div class='xr-array-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 55.36 MiB </td>
                        <td> 507.81 kiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (52, 816, 342) </td>
                        <td> (52, 50, 50) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 119 chunks in 3 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float32 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="131" height="191" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="31" y2="21" style="stroke-width:2" />
  <line x1="10" y1="7" x2="31" y2="28" />
  <line x1="10" y1="14" x2="31" y2="35" />
  <line x1="10" y1="22" x2="31" y2="43" />
  <line x1="10" y1="29" x2="31" y2="50" />
  <line x1="10" y1="36" x2="31" y2="57" />
  <line x1="10" y1="44" x2="31" y2="65" />
  <line x1="10" y1="51" x2="31" y2="72" />
  <line x1="10" y1="58" x2="31" y2="79" />
  <line x1="10" y1="66" x2="31" y2="87" />
  <line x1="10" y1="73" x2="31" y2="94" />
  <line x1="10" y1="80" x2="31" y2="102" />
  <line x1="10" y1="88" x2="31" y2="109" />
  <line x1="10" y1="95" x2="31" y2="116" />
  <line x1="10" y1="102" x2="31" y2="124" />
  <line x1="10" y1="110" x2="31" y2="131" />
  <line x1="10" y1="117" x2="31" y2="138" />
  <line x1="10" y1="120" x2="31" y2="141" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="120" style="stroke-width:2" />
  <line x1="31" y1="21" x2="31" y2="141" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 31.162741526790505,21.162741526790505 31.162741526790505,141.1627415267905 10.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="60" y2="0" style="stroke-width:2" />
  <line x1="31" y1="21" x2="81" y2="21" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="31" y2="21" style="stroke-width:2" />
  <line x1="17" y1="0" x2="38" y2="21" />
  <line x1="24" y1="0" x2="45" y2="21" />
  <line x1="32" y1="0" x2="53" y2="21" />
  <line x1="39" y1="0" x2="60" y2="21" />
  <line x1="46" y1="0" x2="67" y2="21" />
  <line x1="54" y1="0" x2="75" y2="21" />
  <line x1="60" y1="0" x2="81" y2="21" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 60.294117647058826,0.0 81.45685917384932,21.162741526790505 31.162741526790505,21.162741526790505" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="31" y1="21" x2="81" y2="21" style="stroke-width:2" />
  <line x1="31" y1="28" x2="81" y2="28" />
  <line x1="31" y1="35" x2="81" y2="35" />
  <line x1="31" y1="43" x2="81" y2="43" />
  <line x1="31" y1="50" x2="81" y2="50" />
  <line x1="31" y1="57" x2="81" y2="57" />
  <line x1="31" y1="65" x2="81" y2="65" />
  <line x1="31" y1="72" x2="81" y2="72" />
  <line x1="31" y1="79" x2="81" y2="79" />
  <line x1="31" y1="87" x2="81" y2="87" />
  <line x1="31" y1="94" x2="81" y2="94" />
  <line x1="31" y1="102" x2="81" y2="102" />
  <line x1="31" y1="109" x2="81" y2="109" />
  <line x1="31" y1="116" x2="81" y2="116" />
  <line x1="31" y1="124" x2="81" y2="124" />
  <line x1="31" y1="131" x2="81" y2="131" />
  <line x1="31" y1="138" x2="81" y2="138" />
  <line x1="31" y1="141" x2="81" y2="141" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="31" y1="21" x2="31" y2="141" style="stroke-width:2" />
  <line x1="38" y1="21" x2="38" y2="141" />
  <line x1="45" y1="21" x2="45" y2="141" />
  <line x1="53" y1="21" x2="53" y2="141" />
  <line x1="60" y1="21" x2="60" y2="141" />
  <line x1="67" y1="21" x2="67" y2="141" />
  <line x1="75" y1="21" x2="75" y2="141" />
  <line x1="81" y1="21" x2="81" y2="141" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="31.162741526790505,21.162741526790505 81.45685917384932,21.162741526790505 81.45685917384932,141.1627415267905 31.162741526790505,141.1627415267905" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="56.309800" y="161.162742" font-size="1.0rem" font-weight="100" text-anchor="middle" >342</text>
  <text x="101.456859" y="81.162742" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,101.456859,81.162742)">816</text>
  <text x="10.581371" y="150.581371" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,10.581371,150.581371)">52</text>
</svg>
        </td>
    </tr>
</table></div></div></li><li class='xr-section-item'><input id='section-88b7564f-6d18-4a7d-828f-975df9accb91' class='xr-section-summary-in' type='checkbox'  checked><label for='section-88b7564f-6d18-4a7d-828f-975df9accb91' class='xr-section-summary' >Coordinates: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>time</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>1993-01-16T12:00:00</div><input id='attrs-686db780-8d31-46cf-99eb-03eedb9cc893' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-686db780-8d31-46cf-99eb-03eedb9cc893' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-faaed71c-237b-4e05-a31e-263487042299' class='xr-var-data-in' type='checkbox'><label for='data-faaed71c-237b-4e05-a31e-263487042299' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>T</dd><dt><span>bounds :</span></dt><dd>time_bnds</dd><dt><span>calendar_type :</span></dt><dd>GREGORIAN</dd><dt><span>long_name :</span></dt><dd>time</dd></dl></div><div class='xr-var-data'><pre>array(&#x27;1993-01-16T12:00:00.000000000&#x27;, dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>xh</span></div><div class='xr-var-dims'>(xh)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>229.1 229.2 229.3 ... 254.9 255.0</div><input id='attrs-f57fe344-b13a-49f2-9746-e080b20b1102' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f57fe344-b13a-49f2-9746-e080b20b1102' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bb28f6e4-f748-4290-ae2a-294ac9d9a811' class='xr-var-data-in' type='checkbox'><label for='data-bb28f6e4-f748-4290-ae2a-294ac9d9a811' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>X</dd><dt><span>long_name :</span></dt><dd>h point nominal longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>array([229.14502 , 229.210022, 229.275085, ..., 254.794373, 254.879089,
       254.963837], shape=(342,))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>yh</span></div><div class='xr-var-dims'>(yh)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>13.86 13.93 14.0 ... 59.52 59.52</div><input id='attrs-4f37971c-d71f-4a67-972f-4a341df4ba39' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4f37971c-d71f-4a67-972f-4a341df4ba39' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-094c1a47-8091-4fee-90ed-910a80242e88' class='xr-var-data-in' type='checkbox'><label for='data-094c1a47-8091-4fee-90ed-910a80242e88' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>Y</dd><dt><span>long_name :</span></dt><dd>h point nominal latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array([13.861797, 13.930393, 13.999017, ..., 59.509167, 59.516476, 59.523571],
      shape=(816,))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>z_l</span></div><div class='xr-var-dims'>(z_l)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>2.5 7.5 12.5 ... 5.75e+03 6.25e+03</div><input id='attrs-d1acc215-b5ad-4689-910b-d8f964428602' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d1acc215-b5ad-4689-910b-d8f964428602' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a9f8df07-098d-4816-a469-c7b4c42214f6' class='xr-var-data-in' type='checkbox'><label for='data-a9f8df07-098d-4816-a469-c7b4c42214f6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>Z</dd><dt><span>edges :</span></dt><dd>z_i</dd><dt><span>long_name :</span></dt><dd>Depth at cell center</dd><dt><span>positive :</span></dt><dd>down</dd><dt><span>units :</span></dt><dd>meters</dd></dl></div><div class='xr-var-data'><pre>array([2.500e+00, 7.500e+00, 1.250e+01, 1.750e+01, 2.250e+01, 2.750e+01,
       3.250e+01, 3.750e+01, 4.250e+01, 4.750e+01, 5.500e+01, 6.500e+01,
       7.500e+01, 8.500e+01, 9.500e+01, 1.050e+02, 1.150e+02, 1.250e+02,
       1.350e+02, 1.450e+02, 1.625e+02, 1.875e+02, 2.125e+02, 2.375e+02,
       2.625e+02, 2.875e+02, 3.250e+02, 3.750e+02, 4.250e+02, 4.750e+02,
       5.500e+02, 6.500e+02, 7.500e+02, 8.500e+02, 9.500e+02, 1.050e+03,
       1.150e+03, 1.250e+03, 1.350e+03, 1.450e+03, 1.625e+03, 1.875e+03,
       2.125e+03, 2.375e+03, 2.750e+03, 3.250e+03, 3.750e+03, 4.250e+03,
       4.750e+03, 5.250e+03, 5.750e+03, 6.250e+03])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-56be0c1f-bd4c-4bdc-bbea-ea7112bd73bf' class='xr-section-summary-in' type='checkbox'  ><label for='section-56be0c1f-bd4c-4bdc-bbea-ea7112bd73bf' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>xh</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-e8a7ad4c-c084-48bd-a1ef-ced82f8ade04' class='xr-index-data-in' type='checkbox'/><label for='index-e8a7ad4c-c084-48bd-a1ef-ced82f8ade04' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([   229.14501953125, 229.21002197265625, 229.27508544921875,
       229.34022521972656, 229.40542602539062, 229.47068786621094,
       229.53602600097656, 229.60142517089844, 229.66690063476562,
       229.73243713378906,
       ...
        254.2025146484375, 254.28695678710938, 254.37142944335938,
        254.4559326171875, 254.54049682617188, 254.62509155273438,
         254.709716796875, 254.79437255859375, 254.87908935546875,
       254.96383666992188],
      dtype=&#x27;float64&#x27;, name=&#x27;xh&#x27;, length=342))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>yh</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-f5dc3ed8-941c-4233-b3c8-168593db48bf' class='xr-index-data-in' type='checkbox'/><label for='index-f5dc3ed8-941c-4233-b3c8-168593db48bf' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([13.861797332763672,  13.93039321899414, 13.999016761779785,
       14.067668914794922, 14.136350631713867, 14.205060958862305,
       14.273799896240234,  14.34256649017334, 14.411361694335938,
       14.480185508728027,
       ...
        59.45203399658203,  59.46083450317383, 59.469425201416016,
        59.47779846191406,   59.4859619140625,  59.49391174316406,
       59.501644134521484,   59.5091667175293, 59.516475677490234,
         59.5235710144043],
      dtype=&#x27;float64&#x27;, name=&#x27;yh&#x27;, length=816))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>z_l</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-f4d9565d-97d0-4c78-b8d6-5099628af8b4' class='xr-index-data-in' type='checkbox'/><label for='index-f4d9565d-97d0-4c78-b8d6-5099628af8b4' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([   2.5,    7.5,   12.5,   17.5,   22.5,   27.5,   32.5,   37.5,   42.5,
         47.5,   55.0,   65.0,   75.0,   85.0,   95.0,  105.0,  115.0,  125.0,
        135.0,  145.0,  162.5,  187.5,  212.5,  237.5,  262.5,  287.5,  325.0,
        375.0,  425.0,  475.0,  550.0,  650.0,  750.0,  850.0,  950.0, 1050.0,
       1150.0, 1250.0, 1350.0, 1450.0, 1625.0, 1875.0, 2125.0, 2375.0, 2750.0,
       3250.0, 3750.0, 4250.0, 4750.0, 5250.0, 5750.0, 6250.0],
      dtype=&#x27;float64&#x27;, name=&#x27;z_l&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-f887d258-677e-4f9a-ae72-b31dc88ad93e' class='xr-section-summary-in' type='checkbox'  checked><label for='section-f887d258-677e-4f9a-ae72-b31dc88ad93e' class='xr-section-summary' >Attributes: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>cell_measures :</span></dt><dd>volume: volcello area: areacello</dd><dt><span>cell_methods :</span></dt><dd>area:mean z_l:mean yh:mean xh:mean time: mean</dd><dt><span>long_name :</span></dt><dd>Sea Water Potential Temperature</dd><dt><span>standard_name :</span></dt><dd>sea_water_potential_temperature</dd><dt><span>time_avg_info :</span></dt><dd>average_T1,average_T2,average_DT</dd><dt><span>units :</span></dt><dd>degC</dd></dl></div></li></ul></div></div></div></div>
</div>
</section>
<section id="calculate-bbv">
<h2>Calculate BBV<a class="headerlink" href="#calculate-bbv" title="Link to this heading">#</a></h2>
<p>First, we need to load the <code class="docutils literal notranslate"><span class="pre">mom6_ild</span></code> module from <code class="docutils literal notranslate"><span class="pre">mom6.mom6_module</span></code>. Inside this module, there is a class called <code class="docutils literal notranslate"><span class="pre">BruntVaisalaFrequency</span></code> that we will use to calculate the Brunt Vaisala Frequency.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mom6.mom6_module.mom6_bbv</span><span class="w"> </span><span class="kn">import</span> <span class="n">BruntVaisalaFrequency</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bbv_obj</span> <span class="o">=</span> <span class="n">BruntVaisalaFrequency</span><span class="p">(</span>
    <span class="n">da_thetao</span><span class="o">=</span><span class="n">da_thetao</span><span class="p">,</span>
    <span class="n">da_so</span><span class="o">=</span><span class="n">da_so</span><span class="p">,</span>
    <span class="n">da_depth</span><span class="o">=</span><span class="n">da_thetao</span><span class="p">[</span><span class="s1">&#39;z_l&#39;</span><span class="p">],</span>
    <span class="n">da_lon</span><span class="o">=</span><span class="n">da_lon</span><span class="p">,</span>
    <span class="n">da_lat</span><span class="o">=</span><span class="n">da_lat</span><span class="p">,</span>
    <span class="n">eos_version</span><span class="o">=</span><span class="s1">&#39;teos-10&#39;</span><span class="p">,</span>
    <span class="n">interp_method</span><span class="o">=</span><span class="s1">&#39;cubic&#39;</span><span class="p">,</span>
    <span class="n">depth_dim_name</span><span class="o">=</span><span class="s1">&#39;z_l&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">bbv_obj</span></code> stores all the information needed to calculate the BBV. Two important settings are <code class="docutils literal notranslate"><span class="pre">eos_version</span></code> and <code class="docutils literal notranslate"><span class="pre">interp_method</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">eos_version</span></code> decides which equation of state to use for calculating potential density, which affects the stability of the water column. You can choose between <code class="docutils literal notranslate"><span class="pre">eos-80</span></code> and <code class="docutils literal notranslate"><span class="pre">teos-10</span></code> (the default).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interp_method</span></code> decides how the upper 200-meter density profile is interpolated to 1 meter resolution. The options are <code class="docutils literal notranslate"><span class="pre">linear</span></code> and <code class="docutils literal notranslate"><span class="pre">cubic</span></code> (the default).</p></li>
</ul>
<p>Since not all datasets use the same name for the depth dimension (for example, regional MOM6 uses <code class="docutils literal notranslate"><span class="pre">z_l</span></code>), the module lets you choose the name of the depth dimension to make it flexible.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_bbv</span> <span class="o">=</span> <span class="n">bbv_obj</span><span class="o">.</span><span class="n">calculate_bbv</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>To run the calculation, we will use the <code class="docutils literal notranslate"><span class="pre">calculate_bbv</span></code> method. However, at this point we are still not loading the data or doing any real computation. Instead, we’ve created a “calculation plan” (also called a Dask graph) that lists the steps to load the data and perform the BBV calculation. This plan is stored in the <code class="docutils literal notranslate"><span class="pre">ds_bbv</span></code> object, which you can inspect by printing <code class="docutils literal notranslate"><span class="pre">ds_bbv</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_bbv</span><span class="p">[</span><span class="s1">&#39;bbv&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
  border: 2px solid transparent !important;
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0) !important;
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "►";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "▼";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;bbv&#x27; (yh: 816, xh: 342)&gt; Size: 2MB
dask.array&lt;transpose, shape=(816, 342), dtype=float64, chunksize=(50, 50), chunktype=numpy.ndarray&gt;
Coordinates:
    time     datetime64[ns] 8B 1993-01-16T12:00:00
  * xh       (xh) float64 3kB 229.1 229.2 229.3 229.3 ... 254.8 254.9 255.0
  * yh       (yh) float64 7kB 13.86 13.93 14.0 14.07 ... 59.5 59.51 59.52 59.52
Attributes:
    cell_measures:  volume: volcello area: areacello
    cell_methods:   area:mean z_l:mean yh:mean xh:mean time: mean
    long_name:      Mean Brunt-Väisälä Frequency (200m)
    standard_name:  mean_brunt_vaisala_frequency_200m
    time_avg_info:  average_T1,average_T2,average_DT
    units:          1/s</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'bbv'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>yh</span>: 816</li><li><span class='xr-has-index'>xh</span>: 342</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-9cb406b9-9c51-41bd-b2c9-dde2798881ac' class='xr-array-in' type='checkbox' checked><label for='section-9cb406b9-9c51-41bd-b2c9-dde2798881ac' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>dask.array&lt;chunksize=(50, 50), meta=np.ndarray&gt;</span></div><div class='xr-array-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 2.13 MiB </td>
                        <td> 19.53 kiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (816, 342) </td>
                        <td> (50, 50) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 119 chunks in 16 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float64 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="100" height="170" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="50" y2="0" style="stroke-width:2" />
  <line x1="0" y1="7" x2="50" y2="7" />
  <line x1="0" y1="14" x2="50" y2="14" />
  <line x1="0" y1="22" x2="50" y2="22" />
  <line x1="0" y1="29" x2="50" y2="29" />
  <line x1="0" y1="36" x2="50" y2="36" />
  <line x1="0" y1="44" x2="50" y2="44" />
  <line x1="0" y1="51" x2="50" y2="51" />
  <line x1="0" y1="58" x2="50" y2="58" />
  <line x1="0" y1="66" x2="50" y2="66" />
  <line x1="0" y1="73" x2="50" y2="73" />
  <line x1="0" y1="80" x2="50" y2="80" />
  <line x1="0" y1="88" x2="50" y2="88" />
  <line x1="0" y1="95" x2="50" y2="95" />
  <line x1="0" y1="102" x2="50" y2="102" />
  <line x1="0" y1="110" x2="50" y2="110" />
  <line x1="0" y1="117" x2="50" y2="117" />
  <line x1="0" y1="120" x2="50" y2="120" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="120" style="stroke-width:2" />
  <line x1="7" y1="0" x2="7" y2="120" />
  <line x1="14" y1="0" x2="14" y2="120" />
  <line x1="22" y1="0" x2="22" y2="120" />
  <line x1="29" y1="0" x2="29" y2="120" />
  <line x1="36" y1="0" x2="36" y2="120" />
  <line x1="44" y1="0" x2="44" y2="120" />
  <line x1="50" y1="0" x2="50" y2="120" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 50.294117647058826,0.0 50.294117647058826,120.0 0.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="25.147059" y="140.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" >342</text>
  <text x="70.294118" y="60.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,70.294118,60.000000)">816</text>
</svg>
        </td>
    </tr>
</table></div></div></li><li class='xr-section-item'><input id='section-093a13cd-77dd-4ce4-8d1f-1b4b23d0f298' class='xr-section-summary-in' type='checkbox'  checked><label for='section-093a13cd-77dd-4ce4-8d1f-1b4b23d0f298' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>time</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>1993-01-16T12:00:00</div><input id='attrs-a3ea6b3b-e116-49d5-a671-6f205678726b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a3ea6b3b-e116-49d5-a671-6f205678726b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6045c3ec-0d3e-4570-9f15-cb0d7b724f34' class='xr-var-data-in' type='checkbox'><label for='data-6045c3ec-0d3e-4570-9f15-cb0d7b724f34' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>T</dd><dt><span>bounds :</span></dt><dd>time_bnds</dd><dt><span>calendar_type :</span></dt><dd>GREGORIAN</dd><dt><span>long_name :</span></dt><dd>time</dd></dl></div><div class='xr-var-data'><pre>array(&#x27;1993-01-16T12:00:00.000000000&#x27;, dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>xh</span></div><div class='xr-var-dims'>(xh)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>229.1 229.2 229.3 ... 254.9 255.0</div><input id='attrs-a492caad-a7d7-4a42-9b2c-5db3d2987e3c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a492caad-a7d7-4a42-9b2c-5db3d2987e3c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2f1202d6-c237-44ed-a015-b083c09d0593' class='xr-var-data-in' type='checkbox'><label for='data-2f1202d6-c237-44ed-a015-b083c09d0593' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>X</dd><dt><span>long_name :</span></dt><dd>h point nominal longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>array([229.14502 , 229.210022, 229.275085, ..., 254.794373, 254.879089,
       254.963837], shape=(342,))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>yh</span></div><div class='xr-var-dims'>(yh)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>13.86 13.93 14.0 ... 59.52 59.52</div><input id='attrs-f777b49a-2aae-4260-ab72-2f70bb447da5' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f777b49a-2aae-4260-ab72-2f70bb447da5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c5f3ef20-5d37-429e-9a22-49e0abc23797' class='xr-var-data-in' type='checkbox'><label for='data-c5f3ef20-5d37-429e-9a22-49e0abc23797' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>Y</dd><dt><span>long_name :</span></dt><dd>h point nominal latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array([13.861797, 13.930393, 13.999017, ..., 59.509167, 59.516476, 59.523571],
      shape=(816,))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-882b32d0-4711-485e-8700-c07b4196647c' class='xr-section-summary-in' type='checkbox'  ><label for='section-882b32d0-4711-485e-8700-c07b4196647c' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>xh</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-54840e43-c32d-414c-a08c-a01c8f749b7f' class='xr-index-data-in' type='checkbox'/><label for='index-54840e43-c32d-414c-a08c-a01c8f749b7f' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([   229.14501953125, 229.21002197265625, 229.27508544921875,
       229.34022521972656, 229.40542602539062, 229.47068786621094,
       229.53602600097656, 229.60142517089844, 229.66690063476562,
       229.73243713378906,
       ...
        254.2025146484375, 254.28695678710938, 254.37142944335938,
        254.4559326171875, 254.54049682617188, 254.62509155273438,
         254.709716796875, 254.79437255859375, 254.87908935546875,
       254.96383666992188],
      dtype=&#x27;float64&#x27;, name=&#x27;xh&#x27;, length=342))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>yh</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-07852261-8aad-4ce1-b785-964673602034' class='xr-index-data-in' type='checkbox'/><label for='index-07852261-8aad-4ce1-b785-964673602034' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([13.861797332763672,  13.93039321899414, 13.999016761779785,
       14.067668914794922, 14.136350631713867, 14.205060958862305,
       14.273799896240234,  14.34256649017334, 14.411361694335938,
       14.480185508728027,
       ...
        59.45203399658203,  59.46083450317383, 59.469425201416016,
        59.47779846191406,   59.4859619140625,  59.49391174316406,
       59.501644134521484,   59.5091667175293, 59.516475677490234,
         59.5235710144043],
      dtype=&#x27;float64&#x27;, name=&#x27;yh&#x27;, length=816))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-f03c1a2f-9ae1-4a19-b6f3-4f7020cd9fdb' class='xr-section-summary-in' type='checkbox'  checked><label for='section-f03c1a2f-9ae1-4a19-b6f3-4f7020cd9fdb' class='xr-section-summary' >Attributes: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>cell_measures :</span></dt><dd>volume: volcello area: areacello</dd><dt><span>cell_methods :</span></dt><dd>area:mean z_l:mean yh:mean xh:mean time: mean</dd><dt><span>long_name :</span></dt><dd>Mean Brunt-Väisälä Frequency (200m)</dd><dt><span>standard_name :</span></dt><dd>mean_brunt_vaisala_frequency_200m</dd><dt><span>time_avg_info :</span></dt><dd>average_T1,average_T2,average_DT</dd><dt><span>units :</span></dt><dd>1/s</dd></dl></div></li></ul></div></div></div></div>
</div>
<p>One can see the dask graph have increased from the 3 graph (<code class="docutils literal notranslate"><span class="pre">ds_thetao</span></code>) to 13 graph (<code class="docutils literal notranslate"><span class="pre">ds_bbv</span></code>). This is like what was mentioned above becasue it is now including both loading the data and calculation needed to create the BBV.</p>
<section id="dask-for-parallelization">
<h3>Dask for Parallelization<a class="headerlink" href="#dask-for-parallelization" title="Link to this heading">#</a></h3>
<p>Here, we use 2 workers so that two chunks (columns) can be calculated at the same time. If your computer has more resources, you can increase the number of workers to speed up the calculation. Keep in mind that the total time also depends on your internet speed and how quickly your machine can access the data stored in the cloud (S3). The fastest results are usually achieved when running on a cloud instance, such as AWS EC2, close to where the data is stored.</p>
<p>A test on the PSL machine showed that using 2 workers took about 40 minutes, while using 64 workers took about 3 minutes. Although it is not 32 times faster, increasing the number of workers still greatly reduces the total computation time.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># more worker less threads due to GIL of the task involved</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dask.distributed</span><span class="w"> </span><span class="kn">import</span> <span class="n">Client</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">n_workers</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">threads_per_worker</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">dashboard_link</span><span class="p">)</span>
<span class="n">ds_bbv</span> <span class="o">=</span> <span class="n">ds_bbv</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>http://127.0.0.1:46475/status
</pre></div>
</div>
</div>
</div>
<div class="info admonition">
<p class="admonition-title">Techical info</p>
<p>The HTTP link opens the Dask dashboard, where you can see the processing steps and track the progress. You can learn more about how to use the dashboard to check computational performance here.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_bbv</span><span class="o">.</span><span class="n">bbv</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mf">0.005</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.collections.QuadMesh at 0x7f97e43eaf50&gt;
</pre></div>
</div>
<img alt="../../_images/b7eee8aa9eed845e754bbb5b7f02ce32610a14635719b8bc2875ad736b353fb0.png" src="../../_images/b7eee8aa9eed845e754bbb5b7f02ce32610a14635719b8bc2875ad736b353fb0.png" />
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content/tutorials"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="isothermal_layer_depth_tutorial.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Calculate the Isothermal Layer Depth</p>
      </div>
    </a>
    <a class="right-next"
       href="../api/mom6_read.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><code class="docutils literal notranslate"><span class="pre">mom6_read</span></code> - Get the CEFI data</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-the-data">Get the data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-bbv">Calculate BBV</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dask-for-parallelization">Dask for Parallelization</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By regional_mom6 development team
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>